<div class="lg:col-span-1">
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden sticky top-8">
        <div class="p-4 border-b border-gray-100">
            <h2 class="text-lg font-bold text-gray-800">Chi tiết hóa đơn</h2>
        </div>

        @* Items list *@
        <div class="p-4 space-y-5">
            @if(@CartItems != null && @CartItems.Count > 0) 
            {
                @foreach(var item in CartItems) 
                {
                    <div class="flex gap-3">
                        <img class="w-12 h-12 bg-gray-100 rounded border border-gray-200 flex-shrink-0 flex items-center justify-center text-xs text-gray-400" 
                             src="@item.ImageUrl" />
                        <div class="flex-1">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-sm font-semibold text-gray-900">
                                        @item.Name
                                    </p>
                                    <p class="text-xs text-gray-500 mt-0.5">.98 / lb</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm font-bold text-gray-900">@item.Price.ToVnd()</p>
                                </div>
                            </div>
                            <div class="text-xs text-gray-700 mt-1">Số lượng: @item.Quantity</div>
                        </div>
                    </div>
                }
            }
        </div>

        <div class="bg-gray-50 p-5 space-y-3 mt-2 border-t border-gray-100">
            <div class="flex justify-between text-sm text-gray-600">
                <span>Tổng tiền hàng</span>
                <span class="font-semibold text-gray-900">@(GetCartTotal().ToVnd())</span>
            </div>
            <div class="flex justify-between text-sm text-gray-600">
                <span class="flex items-center gap-1">
                    Khuyến mãi
                    <span class="inline-flex items-center justify-center w-4 h-4 rounded-full border border-gray-400 text-[10px] text-gray-500 cursor-help" title="Fee details">i</span>
                </span>
                <span class="font-semibold text-gray-900">@discountAmount.ToVnd()</span>
            </div>
            <div class="flex justify-between text-base font-bold text-gray-900 pt-3 border-t border-gray-200">
                <span>Tổng hóa đơn</span>
                <span>@( (GetCartTotal() - discountAmount).ToVnd())</span>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter] public List<CartItemModel> CartItems { get; set; }
    private decimal discountAmount = 0m;

    public decimal GetCartTotal()
    {
        decimal total = 0;
        if (CartItems != null && CartItems.Count > 0)
        {
            foreach (var item in CartItems)
            {
                total += item.Price * item.Quantity;
            }
        }
        return total;
    }

}
