@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthStateProvider
@inject IConfirmDialogService ConfirmDialogService

<div class="bg-white flex py-4 px-4 items-center justify-between">
    <div class="flex items-center gap-8">
        <div class="items-center flex relative">
            <Icon Name="IconName.Search"
                  IconSize="IconSize.ExtraSmall"
                  Class="absolute pl-1 text-gray-400 pointer-events-none" />
            <input type="text" placeholder="Search..."
                   class="text-sm pl-5 border-gray-400 border rounded-lg py-1 focus:border-sky-500 focus:outline focus:outline-sky-500" />
        </div>

        <div class="flex gap-6">
            <NavLink href="/" Match="NavLinkMatch.All" class="text-gray-600 hover:text-blue-600 font-semibold transition-colors">Home</NavLink>
            <NavLink href="/product" class="text-gray-600 hover:text-blue-600 font-semibold transition-colors">Products</NavLink>
        </div>
    </div>

    <div class="flex gap-4">

            <Icon Name="IconName.Cart"
                  IconSize="IconSize.Large"
                  Class="text-gray-400"
                  @onclick="NavigateToCart"></Icon>

        <Icon Name="IconName.User"
              IconStyle="IconStyle.Regular"
              IconSize="IconSize.Large"
              Class="text-gray-400"></Icon>
        <button @onclick="Logout" class="rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500">
            Logout
        </button>
    </div>
</div>

@code {
    public void NavigateToCart()
    {
        NavigationManager.NavigateTo("/cart");
    }

    public async void Logout()
    {
        bool isConfirmed = await ConfirmDialogService.Show("Xác nhận đăng xuất?");

        if (isConfirmed)
        {
            var customAuthStateProvider = (CustomAuthStateProvider)AuthStateProvider;
            await customAuthStateProvider.NotifyUserLogout();
            NavigationManager.NavigateTo("/login");
        }
    }
}