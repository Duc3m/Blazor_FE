@page "/checkout-success"
@page "/checkout-success/{OrderId}"
@inject NavigationManager Navigation

<div class="min-h-[80vh] bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 font-sans">

    <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
        <div class="bg-white py-10 px-6 shadow-lg sm:rounded-xl sm:px-12 text-center border border-gray-100 animate-fade-in-up">

            <div class="mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-green-100 mb-8">
                <svg class="h-12 w-12 text-green-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
            </div>

            <h2 class="text-2xl font-extrabold text-gray-900 mb-4">
                Thanh toán thành công!
            </h2>
            <p class="text-base text-gray-500 mb-8">
                Cảm ơn bạn đã đặt hàng. Đơn hàng của bạn sẽ được giao đến bạn trong thời gian sớm nhất.
            </p>

            @if (!string.IsNullOrEmpty(OrderId))
            {
                <div class="bg-gray-50 p-5 rounded-lg mb-10 border border-gray-200 dashed-border">
                    <p class="text-sm font-medium text-gray-600 uppercase tracking-wider mb-1">Mã đơn hàng của bạn</p>
                    <p class="text-2xl font-bold text-gray-800 select-all break-all">#@OrderId</p>
                </div>
            }

            <div class="space-y-4">

                <button @onclick="GoHome" class="w-full flex justify-center py-3.5 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-bold text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out">
                    <span class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                        Tiếp tục mua sắm
                    </span>
                </button>
            </div>

        </div>
    </div>
</div>

<style>
    .dashed-border {
        border-style: dashed;
    }

    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translate3d(0, 20px, 0);
        }

        to {
            opacity: 1;
            transform: none;
        }
    }

    .animate-fade-in-up {
        animation: fadeInUp 0.5s ease-out both;
    }
</style>

@code {
    [Parameter] public string? OrderId { get; set; }
    [SupplyParameterFromQuery(Name="responseCode")]
    public string? ResponseCode { get; set; }

    private void GoHome() => Navigation.NavigateTo("/product");

    protected override void OnInitialized()
    {
        if(ResponseCode == null || ResponseCode != "00")
        {
            Navigation.NavigateTo("/product");
        }
    }

}